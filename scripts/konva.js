function dumortieraHirsutaPoints() {
  return {
    'Talo': {
      color: 'red',
      points: [
        388.427336718883,473.3828937882393,
        390.3994228315492,483.1492180999102,
        393.474398710817,492.66179932680353,
        396.80589267425097,502.1051787937556,
        400.1474583579932,511.5200147588171,
        403.3887352593591,520.9793141706643,
        406.4371829631253,530.5051943989001,
        409.2057010594367,540.1154964953954,
        411.59683980099175,549.8214814308925,
        413.4931917766621,559.6438744322095,
        414.7325766770216,569.567823587087,
        415.09529033440344,579.5520965496897,
        414.2796427240689,589.5097246779674,
        411.89841248419253,599.208968234174,
        407.5785112859607,608.2029095880389,
        401.22008755932563,615.8845003950985,
        393.1873507196335,621.8110388700692,
        384.1112903600396,625.9559161016693,
        374.4829406904554,628.6058763907266,
        364.5909568103601,630.0886461565766,
        354.61032667914776,630.6711651779785,
        344.6086451656831,630.6040204544765,
        334.63036105095136,630.0736123255406,
        324.6986764048963,628.9180259948139,
        314.9269184876336,626.8278456474739,
        305.61875395856345,623.2284692356419,
        297.73091095032265,617.1768848041249,
        293.10225423462373,608.39853137513,
        291.597424379391,598.528291892246,
        290.2813636218412,588.623914793347,
        287.6948436834207,579.0083357850616,
        287.80459550858507,569.0202095245575,
        289.75806143426894,559.2330327667594,
        292.6276549632315,549.6411292893838,
        295.69870554228874,540.1209179565842,
        298.21903355698953,530.454748130443,
        298.87106165844943,520.5118889434709,
        289.8752747373208,519.8623448253795,
        281.4596016844612,525.1297993806542,
        273.87923141296955,531.6561849866584,
        264.88631227795037,535.5586012965962,
        256.08060249268954,531.1504123067909,
        248.2596723248536,524.9214847955388,
        240.83669586621482,518.219832932279,
        233.7949933379707,511.1164812288833,
        227.20086167836166,503.60440601608855,
        221.17769269361057,495.6263294216824,
        215.9578007011599,487.09364272329105,
        211.99303881329627,477.93952094275517,
        210.09583618861276,468.14079934623055,
        211.52723909195697,458.31686634599043,
        216.80199190872906,449.9138791499138,
        224.96766354303375,444.20268312305126,
        234.2165870377614,440.43561055395185,
        243.63179568821192,437.06544313287736,
        252.59192162319565,432.6644971357929,
        259.9980117855694,425.9983744079417,
        266.0152193039979,418.0204992489359,
        271.1499300953426,409.43774621897086,
        275.8572146802576,400.6146545195841,
        280.61956713051666,391.830756029657,
        285.9251462330222,383.35173044425255,
        292.04998243882164,375.45737518402257,
        298.6616350423227,367.95445649366053,
        305.6822283186175,360.8410821068104,
        312.980272576161,354.00670955336216,
        320.1949096172878,347.07388084075103,
        326.65385505863435,339.4485840488968,
        331.7092137407288,330.84659874726833,
        335.3148026377634,321.5225229172248,
        337.828503838308,311.84495110751806,
        336.15954593563083,304.04494861221315,
        326.48992188447716,306.32440758814664,
        317.806804233551,311.26372303247456,
        310.20451949492775,317.7418972156597,
        303.07050831535383,324.742039489354,
        296.0933576585271,331.90608392560017,
        288.97478302302545,338.9296738846364,
        281.4326185218301,345.4905326454416,
        273.3788453030875,351.4040798582118,
        265.049445769046,356.95292313932214,
        256.57205029724634,362.24296435272885,
        248.00096880740568,367.4101384568803,
        239.42436083152853,372.56685598773066,
        230.93038590161953,377.82552748123385,
        222.57321653863707,383.32182792590766,
        214.46115581851453,389.16051677690444,
        206.80118794926642,395.569754828749,
        200.88044249598403,403.6209846121278,
        195.9245674579218,412.2965452593416,
        190.25385557914527,420.5233485182374,
        182.19800956445283,425.9988527917964,
        172.22557993090024,425.7554871503635,
        162.33292905122045,424.2611095394492,
        152.5956316195418,422.04720550392625,
        143.20316051658244,418.6666810662821,
        135.6959306402253,412.07982190063746,
        128.88858067275865,404.77109192695593,
        123.58953149887174,396.2981609237073,
        119.71003332930803,387.08403915891796,
        117.08901982526177,377.5142671938637,
        119.07704087060132,367.7694630588107,
        123.20281156750747,358.65601736975134,
        128.038301187762,349.90825927455876,
        132.87309641845525,341.15560226783157,
        138.54834195370975,333.2590115384683,
        145.90737236452105,329.8549900683164,
        137.0027038656557,325.3542109127974,
        128.8074585990906,319.61947744464874,
        121.87235966019611,312.43838838662697,
        117.32612545498542,303.61074809087535,
        116.59267293369491,293.7098193497348,
        119.66554366073817,284.2343911318909,
        125.13520340538473,275.8922863743588,
        131.93119677297412,268.5584385673401,
        139.47932572288678,262.01638158628566,
        148.23966052025486,258.51682555471626,
        155.05441002552396,265.688486075799,
        161.47945662644435,273.30016696274544,
        170.86461741625064,274.6160592216513,
        179.03696911682653,269.02466928506175,
        185.15062597397284,261.1299646969378,
        190.71747897790777,252.82458926561532,
        197.27316620605336,245.3093693941628,
        206.2330213400349,241.61875888166577,
        216.00752876891943,243.67108881697806,
        225.82889449800786,242.78843664260035,
        235.50821583811742,240.28259354641315,
        245.22021174222797,237.92639973419995,
        254.9716483576678,235.6817482020034,
        264.7334105469132,233.5200746008542,
        274.5133677463906,231.40521181959133,
        284.29523577212245,229.30694320182494,
        294.062852313148,227.1952785283475,
        303.8246675856284,225.03494261809075,
        313.56444365539744,222.79571118286228,
        323.2900575886636,220.44108779308849,
        332.9724367338638,217.94246127927525,
        342.6064144923756,215.26455961878406,
        352.1860277471991,212.37056700598853,
        361.6810751809453,209.22977308714903,
        371.0615640829676,205.81191813389037,
        380.34284264537996,202.06851172678677,
        389.47127715501324,197.97660443225027,
        398.4170527843562,193.5063619683313,
        407.1406774594715,188.63571743877557,
        415.6145858119791,183.33523887254583,
        421.5493291859459,175.50780932483448,
        422.5049019837131,165.61249966491226,
        420.93696499468734,155.74459393701002,
        418.56740440311097,146.03573670532182,
        416.3008504038653,136.29438697925775,
        415.03260569976084,126.38004921254887,
        416.2360635953306,116.51068083248515,
        421.41109280718604,108.03523173296887,
        428.14522584391733,100.65870451900594,
        435.5589075103766,93.9527677295207,
        443.48465239374946,87.8333026659795,
        451.7517602167657,82.22854254832748,
        460.2872605218564,77.01810596083583,
        469.0118751503909,72.11022395919076,
        477.8302026983081,67.43458121558636,
        486.7450358746698,62.877731850263245,
        495.6674808181767,58.37765929308138,
        504.581462356541,53.8310998680077,
        513.4171630797025,49.15023620489773,
        522.5871491637006,47.680747912816706,
        528.1315522980714,55.64695828535012,
        531.1550468832368,65.183598432526,
        533.9753623727102,74.77929370969892,
        536.6303193578951,84.42295617784438,
        539.1534615140037,94.08675305667954,
        541.591285613156,103.7930511036543,
        543.9730500794502,113.49727602233436,
        546.3447624888477,123.22193445958086,
        548.7359096305236,132.92238869792234,
        551.1925315464441,142.6211323368831,
        553.748343136285,152.29028504410616,
        556.4411649914496,161.918758880567,
        559.308817703341,171.49546590724114,
        562.3891218633624,181.00931818510406,
        565.7118522060513,190.45073676842452,
        568.7909530206323,199.95682732003928,
        572.3743624024391,209.273739133358,
        576.6301734267334,218.30672413899936,
        579.5145867277467,227.88171914304235,
        584.7238011136949,236.23485843254625,
        592.5734561497247,242.41729427407148,
        600.6044971168749,248.37711237105913,
        608.2548170918002,254.80707330840082,
        615.2336082167411,261.96768513522574,
        622.0240189196969,269.30128901421614,
        628.8778609952851,276.60169402370605,
        635.9433353567367,283.6633133077118,
        643.6319025899992,290.0301583411768,
        652.1056109363038,295.34158667249915,
        660.5980428175578,300.6378461750447,
        669.0832792393687,305.91284440361653,
        677.5850918605254,311.1828793365732,
        681.265242999055,319.18190816983537,
        681.4266577877926,329.1893519500967,
        681.5878977880157,339.1859591382095,
        681.7491495647431,349.1832964496612,
        681.9105039263666,359.1869938510954,
        682.0716327125119,369.17670595456053,
        682.2330600380785,379.1849269970171,
        679.9631112857461,387.3648066096306,
        670.1033407025337,388.9460243492126,
        660.1896511582211,388.039852901876,
        651.1754563167486,383.76096845374946,
        642.728387904789,378.39993122012146,
        634.6773910364154,372.47826273977046,
        626.8499448537808,366.24563018750223,
        619.1117219758457,359.91272465846436,
        611.321877631545,353.65767689529804,
        603.3174712641257,347.65077977258886,
        594.9759802466538,342.13871240451056,
        586.152496530652,337.42621839498725,
        576.7920942581054,333.94903052223196,
        572.1628820371628,340.7869472985268,
        572.5370995591264,350.79214451237857,
        572.5547709039109,360.77644867330724,
        573.5888261908424,370.72220543136166,
        575.1399981576299,380.5956053140725,
        576.9735310928983,390.4207980581524,
        578.9639078316853,400.2322223594366,
        581.0205127130693,410.010703235576,
        583.085676304322,419.7909364131791,
        585.1091118379906,429.5937398131789,
        587.0371703839744,439.40834018895634,
        588.8189673955851,449.2454641466723,
        590.3963414338973,459.11384315532564,
        591.6985140623269,469.02704485145154,
        592.6307886506403,478.991699702691,
        593.0593242554414,488.9776456190157,
        592.790642528149,498.9786564863541,
        591.5261935759813,508.8833686820785,
        588.7917451813297,518.4975123018804,
        583.9509335002886,527.2134292042924,
        576.6165339412867,533.9212869397294,
        567.4251439372077,537.7218848441393,
        557.5021948442278,538.8879678050724,
        547.5353033265525,538.2303615905217,
        537.6717034040298,536.654621216408,
        527.9025582762354,534.5041198854839,
        518.2329384396866,531.942150985606,
        508.63357144400686,529.1082043659028,
        499.8525391909734,524.4473924091592,
        493.05684103068893,517.1551265592221,
        488.31375476265885,508.3823331696708,
        485.007199254036,498.9465830950736,
        483.11833294782497,489.13231282196296,
        481.7978488216251,479.2173971606865,
        480.8779164661735,469.25267529097397,
        480.6060231655438,459.2723881290265,
        481.66592310908965,449.3252956448661,
        483.09535055218123,439.4398026879869,
        484.79054035694253,429.5707635396169,
        486.59256397076217,419.74172428875187,
        488.28018824756,409.8782555826121,
        489.5988172175478,399.9729387538828,
        490.36319625196546,389.9990405817024,
        490.49780357618164,380.0023407764817,
        490.02952152919033,370.00981318174007,
        488.54307165092604,360.15066175111474,
        485.66931631720445,350.5759537515724,
        482.04768722775583,341.2531844896749,
        478.1600153482615,332.0365392601432,
        474.4290220587789,322.7543396049192,
        471.35624341340457,313.25115708437284,
        469.4171753053144,303.43236977795516,
        467.7648727252126,293.5841242891672,
        466.1042107819588,283.7185758727709,
        464.13839404853434,273.9144361418412,
        460.4569350061259,279.3772158804816,
        457.3872773379683,288.8787968863249,
        453.85106405675583,298.2350460615342,
        449.523183011188,307.2550340579297,
        445.3247628278642,316.3230502730328,
        441.3084729395478,325.47815124735723,
        437.4187353057339,334.70298196512584,
        433.63010766172397,343.94377560755,
        429.8883482758135,353.23692638132667,
        426.18463097895494,362.51692202086724,
        422.47300860039945,371.81148052768515,
        418.73423268738725,381.07387738175566,
        414.91530966109974,390.3212458984946,
        410.9719612328644,399.5099018032355,
        406.9148777943864,408.6478370356568,
        402.893275106213,417.80447362301226,
        399.04917902839276,427.0315065426556,
        395.5133064525396,436.3948215261762,
        392.4527821480954,445.914988797298,
        390.0727315978435,455.6095849256484,
        388.64272603608913,465.4994579129278,
      ],  
    }
  };
}
function bryophytaPoints() {
  return {
    'Capsula 1': {
      color: 'red',
      points: [
        290.33264743161953,153.86548766501306,
        295.09819398880006,162.58154561120273,
        303.98713237992314,163.9455980041568,
        311.03504759507626,157.20313247364015,
        312.44305324014493,147.39666412156484,
        310.43915824207204,137.6267791702162,
        306.4415725004757,128.51267799147593,
        297.20734011211243,126.75078411236404,
        291.7721028055261,134.60902413746402,
        289.8545501077928,144.40904622967298,
      ]
    },
    'Capsula 2': {
      color: 'red',
      points: [
        303.4251735861994,200.17346015174672,
        293.8414030202227,202.54529915856568,
        283.9245745895581,201.5409109815387,
        274.831581090413,197.56426131731274,
        271.99588777010143,188.64482710584252,
        278.69179641485215,182.09812076759337,
        288.6357410193486,182.53579351200537,
        298.07954870063213,185.77204039029914,
        305.5734067678451,191.9736013695598,
      ]
    },
    'Capsula 4': {
      color: 'red',
      points: [
        90.50226657052303,140.6196128215312,
        98.83329881765972,144.6877332637743,
        102.07749774858262,154.06520493402752,
        101.21246378909797,163.91051964429394,
        93.66689276972285,169.5993549656327,
        84.34880634676665,167.45157888934762,
        81.99101157298031,158.01194884284865,
        84.39001738911867,148.3437922462821,
        90.40704648810625,140.6485443457961,        
      ]
    },
    'Capsula 5': {
      color: 'red',
      points: [
        196.39427724022534,165.83981012182682,
        196.06401135999153,173.66987409371137,
        203.38570153617115,180.1331609818265,
        212.51910373073815,177.09197512823343,
        212.07862547545508,168.04629793845302,
        202.9503536376953,164.88569464111328,
      ]
    },
    'Capsula 6': {
      color: 'red',
      points: [
        212.7970824636767,196.09841191927168,
        221.432415081501,192.638603913486,
        224.10067578125,183.18503515625,
        217.6500906100329,176.1689866529461,
        208.87770312499995,177.21753124999998,
        205.27802185663103,186.41914932103197,
        209.60875381846262,194.80302744785138,
      ]
    },
    'Filoide 1': {
      color: 'purple',
      points: [
        324.3640076075577,265.43818780533206,
        315.0912001286373,268.0983062172383,
        308.74742849111556,275.70935258007046,
        308.0676730165277,285.5889225698477,
        310.29512377977903,295.2882411187474,
        316.885089816645,302.4420433718314,
        326.713529620288,302.26192935349326,
        335.34944724594595,297.3753172061084,
        340.1257103344202,288.86962163120506,
        338.77415283060077,279.0250489377976,
        333.37047358807627,270.7164434746599,
        324.8811021020813,265.606524876425,
      ]
    },
    'Filoide 2': {
      color: 'purple',
      points: [
        220.3618102458463,315.2415467445429,
        228.18775724002907,309.35927460845284,
        229.05603008535502,299.81423649051413,
        223.4250476132892,291.64765122212145,
        214.86075610470772,286.6649545386732,
        205.02691168113424,286.8330363540999,
        199.30759375897048,294.40175860733916,
        201.4857596168518,304.017563296318,
        208.11388258727638,311.40751592065584,
        217.1184084181562,315.5005235155504,
      ]
    },
    'Filoide 3': {
      color: 'purple',
      points: [
        207.75823437499997,315.8745401515962,
        217.48203125000003,318.16327763061133,
        226.84951902425942,321.6299123342009,
        231.9906617560992,329.23010665824546,
        227.34916849446518,337.9684434573279,
        220.12748306553158,344.74440695112196,
        210.44226420332552,344.1802879935233,
        202.63069821440428,338.05025629097224,
        197.18274201869963,329.7462353663733,
        200.76606813716887,320.9146154824616,
      ]
    },
    'Filoide 4': {
      color: 'purple',
      points: [
        201.44730565354746,348.648626334185,
        209.65431945919525,343.800214370504,
        219.48797076886893,345.03662969684603,
        226.73960330591075,351.31830600348025,
        224.826627911319,360.91616491944995,
        217.0615366157601,366.27438229164227,
        207.9573564104438,362.4230160208196,
        201.65380731439592,354.8065715533495,
      ]
    },
    'Haste 1': {
      color: 'blue',
      points: [
        202.0674687882516,346.54805909146586,
        193.22291309586782,341.9236893169152,
        183.73766247320174,338.80091528368,
        173.940710131987,336.7962447531494,
        164.02204716258856,335.6235456912074,
        154.0620760120426,336.32637836047985,
        144.34304313335414,338.6617205266072,
        134.74336597008968,341.43490555849405,
        124.90906796640904,343.1527919367924,
        115.03427228851524,341.958294389653,
        106.2573271086003,337.2457186992472,
        98.90155996189081,330.4851777256289,
        92.7480701455623,322.6383184060976,
        89.24956084608567,313.31338843438493,
        86.83302951442876,303.60775452816057,
        85.47105781203194,293.7047555633554,
        87.52217760098574,284.11438672487964,
        96.62083201376164,281.13216605623484,
        106.4498940572847,282.94064859365704,
        116.08168729646422,285.5826905278907,
        125.74636736860424,288.1491560946082,
        135.53854899709404,290.1903977864374,
        145.04945040130616,288.53602208709714,
        152.23072338776478,281.5955498447809,
        146.60125543117522,283.8949734277725,
        137.30416761495172,287.31161107874664,
        128.08909549027123,283.6781428934606,
        118.4526716891456,281.0129409892437,
        108.78201237312705,278.5008275125101,
        98.93278494685887,276.82883872288465,
        89.06616335690767,277.9358304050937,
        81.60158407571205,284.29013857155877,
        78.13149809295625,293.62099548216855,
        79.16985108037292,303.42467439502474,
        83.04508149317839,312.62560773240773,
        88.05459310150147,321.29329470825195,
        93.99551239135117,329.32323463987467,
        100.62292694622278,336.80405062929543,
        108.29048625480382,343.1828604349373,
        117.45766919469833,347.00345522111655,
        127.41124929361044,346.5433578333929,
        137.2248394135218,344.68099445215336,
        146.9906591042776,342.5072097428729,
        156.92157166957855,341.49604456567766,
        166.9176836564066,341.84068971537334,
        176.6587933533406,344.0175329301739,
        186.4466882265136,346.0247557095168,
        196.35422680560498,347.41855765869565,
      ]
    },
    'Haste 2': {
      color: 'blue',
      points: [
        85.44529910125759,141.04326273603573,
        76.32721168142558,137.482880469203,
        67.2213117215382,140.54941802878957,
        64.97174485605116,149.8150566157587,
        69.86484219341725,158.35809246054293,
        76.97927883999238,165.3841961362399,
        84.63326762263476,171.79809674367306,
        92.94299268245697,177.37721563529968,
        100.86560863956623,183.44787104895337,
        107.27042988903821,191.08514331141112,
        113.22193937323242,199.1249895554185,
        119.60163750357181,206.80672838670017,
        126.28869754797965,214.25141768437624,
        133.30247798776628,221.3718168373108,
        140.7705814061165,228.01358906936645,
        140.12226828612947,233.4957556415908,
        132.41061000061038,228.0514945411682,
        125.88908501264126,220.48706470560387,
        119.40822998649692,212.8534678341401,
        112.90633351651951,205.26945510592589,
        106.27108309389604,197.76981996350165,
        99.36524629395409,190.55274917399498,
        91.74303375878253,184.09923309933032,
        84.12611551055565,177.6114461068028,
        76.77482171533521,170.83322153387928,
        69.83046509203172,163.6399916732508,
        63.63344338921402,155.79722284819127,
        59.386405429871054,146.80422254815977,
        62.69175027620793,138.04386354279518,
        71.85225229615159,134.40306580095364,
        81.82512355289794,134.53433625847475,
        86.38487435257434,140.31072562605888,
      ]
    }
  }
}

var width = window.innerWidth;
var height = window.innerHeight - 200;

function updateTooltip(tooltip, x, y, text) {
  tooltip.getText().text(text);
  tooltip.position({
    x: x,
    y: y,
  });
  tooltip.show();
}

var stage = new Konva.Stage({
  container: 'container',
  width: width,
  height: height,
});
var shapesLayer = new Konva.Layer();
var tooltipLayer = new Konva.Layer();

var tooltip = new Konva.Label({
  opacity: 1,
  visible: false,
  listening: false,
});
tooltip.add(
  new Konva.Tag({
    fill: 'black',
    pointerDirection: 'down',
    pointerWidth: 10,
    pointerHeight: 10,
    lineJoin: 'round',
    cornerRadius: 3,
  })
);
tooltip.add(
  new Konva.Text({
    text: '',
    align: 'center',
    fontFamily: 'Calibri',
    fontSize: 18,
    padding: 5,
    fill: 'white',
  })
);
tooltipLayer.add(tooltip);

// get areas data
document.addEventListener("DOMContentLoaded", () => {
  init();
});

document.querySelector('#selectItems').addEventListener('change', (event) => {
  //stage.destroyChildren();
  shapesLayer.destroy();
  init();
});

function init() {
  var item = document.getElementById("selectItems").value;
  var areas = {}

  switch (item) {
    case 'dumortiera_hirsuta':
      areas = dumortieraHirsutaPoints();
      break;
    case 'bryophyta':
      areas = bryophytaPoints();
      break;
  }

  // draw areas
  for (var key in areas) {
    var area = areas[key];
    var points = area.points;

    var shape = new Konva.Line({
      points: points,
      fill: area.color,
      opacity: 0,
      closed: true,
      // custom attr
      key: key,
    });
    shapesLayer.add(shape);
  }

  stage.add(shapesLayer);
  stage.add(tooltipLayer);
}

stage.on('mouseover', (evt) => {
  var shape = evt.target;
  if (shape) {
    shape.opacity(0.6);
  }
});
stage.on('mouseout', (evt) => {
  var shape = evt.target;
  if (shape) {
    shape.opacity(0);
    tooltip.hide();
  }
});
stage.on('mousemove', (evt) => {
  var shape = evt.target;
  if (shape) {
    var mousePos = stage.getPointerPosition();
    var x = mousePos.x;
    var y = mousePos.y - 5;
    updateTooltip(tooltip, x, y, shape.attrs.key);
  }
});